<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Smart Text Summarizer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <style id="app-style">
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }

        .dark {
            @apply bg-gray-900 text-gray-100;
        }

        .light {
            @apply bg-gray-50 text-gray-900;
        }

        .card {
            transition: transform 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }

        .gradient-bg-light {
            background: linear-gradient(120deg, #f6d365 0%, #fda085 100%);
        }
        
        .gradient-bg-dark {
            background: linear-gradient(120deg, #30cfd0 0%, #330867 100%);
        }

        .gradient-btn-light {
            background: linear-gradient(90deg, #ff9a9e 0%, #fad0c4 100%);
            transition: all 0.3s ease;
        }
        
        .gradient-btn-dark {
            background: linear-gradient(90deg, #4facfe 0%, #00f2fe 100%);
            transition: all 0.3s ease;
        }
        
        .gradient-btn-light:hover, .gradient-btn-dark:hover {
            filter: brightness(110%);
            transform: scale(1.03);
        }

        .animated-pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
            100% {
                transform: scale(1);
            }
        }

        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border-left-color: #09f;
            animation: spin 1s linear infinite;
        }

        .dark .spinner {
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-left-color: #09f;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }

        .keyword-pill {
            transition: all 0.2s ease;
        }
        
        .keyword-pill:hover {
            transform: scale(1.1);
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .file-upload-area {
            border: 2px dashed #cbd5e0;
            transition: all 0.3s ease;
        }

        .dark .file-upload-area {
            border-color: #4a5568;
        }

        .file-upload-area:hover {
            border-color: #4299e1;
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: #3b82f6;
        }

        input:checked + .slider:before {
            transform: translateX(30px);
        }
    </style>
</head>
<body class="dark:bg-gray-900 dark:text-gray-100">
    <div id="app"></div>

    <script type="text/babel">
        const App = () => {
            const [darkMode, setDarkMode] = React.useState(false);
            const [inputText, setInputText] = React.useState('');
            const [outputSummary, setOutputSummary] = React.useState('');
            const [isProcessing, setIsProcessing] = React.useState(false);
            const [summaryHistory, setSummaryHistory] = React.useState([]);
            
            // New state hooks for the requested features
            const [frequencyData, setFrequencyData] = React.useState([]);
            const [topKeywords, setTopKeywords] = React.useState([]);
            const [huffmanMapping, setHuffmanMapping] = React.useState({});
            const [huffmanBitLength, setHuffmanBitLength] = React.useState(0);
            const [huffmanRatio, setHuffmanRatio] = React.useState(0);
            const [showHuffmanDetails, setShowHuffmanDetails] = React.useState(false);
            
            // Algorithm selection states
            const [useFrequencyAnalysis, setUseFrequencyAnalysis] = React.useState(true);
            const [useLCS, setUseLCS] = React.useState(false);
            const [useGreedySelection, setUseGreedySelection] = React.useState(true);
            const [summaryLength, setSummaryLength] = React.useState(3); // Default to 3 sentences

            React.useEffect(() => {
                // Load history from localStorage when component mounts
                const loadHistory = () => {
                    const savedHistory = localStorage.getItem('summaryHistory');
                    if (savedHistory) {
                        setSummaryHistory(JSON.parse(savedHistory));
                    }
                    
                    // Load algorithm preferences
                    const savedFrequencyAnalysis = localStorage.getItem('useFrequencyAnalysis');
                    if (savedFrequencyAnalysis) setUseFrequencyAnalysis(JSON.parse(savedFrequencyAnalysis));
                    
                    const savedLCS = localStorage.getItem('useLCS');
                    if (savedLCS) setUseLCS(JSON.parse(savedLCS));
                    
                    const savedGreedy = localStorage.getItem('useGreedySelection');
                    if (savedGreedy) setUseGreedySelection(JSON.parse(savedGreedy));
                    
                    const savedLength = localStorage.getItem('summaryLength');
                    if (savedLength) setSummaryLength(parseInt(savedLength));
                    
                    const savedTheme = localStorage.getItem('darkMode');
                    if (savedTheme) setDarkMode(JSON.parse(savedTheme));
                };
                
                loadHistory();
            }, []);
        
            // Save algorithm preferences to localStorage when they change
            React.useEffect(() => {
                localStorage.setItem('useFrequencyAnalysis', JSON.stringify(useFrequencyAnalysis));
                localStorage.setItem('useLCS', JSON.stringify(useLCS));
                localStorage.setItem('useGreedySelection', JSON.stringify(useGreedySelection));
                localStorage.setItem('summaryLength', summaryLength);
                localStorage.setItem('darkMode', JSON.stringify(darkMode));
            }, [useFrequencyAnalysis, useLCS, useGreedySelection, summaryLength, darkMode]);

            const addToHistory = (summary) => {
                const newHistoryItem = {
                    summary: summary,
                    timestamp: new Date().toISOString()
                };
                
                const updatedHistory = [newHistoryItem, ...summaryHistory].slice(0, 10); // Keep only last 10 entries
                setSummaryHistory(updatedHistory);
                localStorage.setItem('summaryHistory', JSON.stringify(updatedHistory));
            };

            const removeFromHistory = (index) => {
                const updatedHistory = [...summaryHistory];
                updatedHistory.splice(index, 1);
                setSummaryHistory(updatedHistory);
                localStorage.setItem('summaryHistory', JSON.stringify(updatedHistory));
            };

            const clearAllHistory = () => {
                setSummaryHistory([]);
                localStorage.removeItem('summaryHistory');
            };

            const viewHistorySummary = (summary) => {
                setOutputSummary(summary); // Set the existing output summary state
                // Scroll to summary output card if needed
            };

            // Word frequency analysis function
            const computeWordFrequency = (text) => {
                if (!text) return [];
                const words = text.toLowerCase().match(/\b\w+\b/g) || [];
                const freqMap = {};
                words.forEach(word => {
                    freqMap[word] = (freqMap[word] || 0) + 1;
                });
                
                // Convert to array and sort by frequency
                const freqArray = Object.entries(freqMap).map(([word, count]) => ({ word, count }));
                freqArray.sort((a, b) => b.count - a.count);
                
                // Set top keywords (top 10)
                setTopKeywords(freqArray.slice(0, 10));
                
                return freqArray;
            };
            
            // Huffman encoding implementation
            const huffmanEncode = (text) => {
                if (!text) return { mapping: {}, bitLength: 0, ratio: 0 };
                
                // Build frequency table
                const freqMap = {};
                for (let char of text) {
                    freqMap[char] = (freqMap[char] || 0) + 1;
                }
                
                // Create leaf nodes
                let nodes = Object.entries(freqMap).map(([char, freq]) => ({ char, freq }));
                
                // Build Huffman tree
                while (nodes.length > 1) {
                    nodes.sort((a, b) => a.freq - b.freq);
                    const left = nodes.shift();
                    const right = nodes.shift();
                    nodes.push({
                        char: left.char + right.char,
                        freq: left.freq + right.freq,
                        left,
                        right
                    });
                }
                
                // Generate codes
                const codeMap = {};
                const generateCodes = (node, code = '') => {
                    if (!node.left && !node.right) {
                        codeMap[node.char] = code || '0';
                        return;
                    }
                    if (node.left) generateCodes(node.left, code + '0');
                    if (node.right) generateCodes(node.right, code + '1');
                };
                
                generateCodes(nodes[0]);
                
                // Calculate total bit length
                let totalBits = 0;
                for (let char of text) {
                    totalBits += codeMap[char].length;
                }
                
                // Calculate compression ratio (8 bits per character in ASCII)
                const originalBits = text.length * 8;
                const compressionRatio = (1 - totalBits / originalBits) * 100;
                
                return {
                    mapping: codeMap,
                    bitLength: totalBits,
                    ratio: compressionRatio.toFixed(2)
                };
            };
            
            // LCS-based similarity function
            const lcsLength = (a, b) => {
                if (!a || !b) return 0;
                const m = a.length;
                const n = b.length;
                const dp = Array(m + 1).fill().map(() => Array(n + 1).fill(0));
                
                for (let i = 1; i <= m; i++) {
                    for (let j = 1; j <= n; j++) {
                        if (a[i - 1] === b[j - 1]) {
                            dp[i][j] = dp[i - 1][j - 1] + 1;
                        } else {
                            dp[i][j] = Math.max(dp[i - 1][j], dp[i][j - 1]);
                        }
                    }
                }
                
                return dp[m][n];
            };
            
            // Compute LCS score for each sentence
            const computeLcsScore = (sentences) => {
                const scores = Array(sentences.length).fill(0);
                
                for (let i = 0; i < sentences.length; i++) {
                    for (let j = 0; j < sentences.length; j++) {
                        if (i !== j) {
                            const lcsScore = lcsLength(sentences[i], sentences[j]);
                            scores[i] += lcsScore;
                        }
                    }
                }
                
                return scores;
            };
            
            // Greedy sentence selection for summarization
            const greedySummarize = (sentences, scores, summaryLength) => {
                if (sentences.length <= summaryLength) return sentences;
                
                const selectedIndices = [];
                const remainingIndices = [...Array(sentences.length).keys()];
                
                // Select sentences iteratively
                while (selectedIndices.length < summaryLength && remainingIndices.length > 0) {
                    // Find the highest scoring sentence
                    let maxIndex = -1;
                    let maxScore = -Infinity;
                    
                    for (let i of remainingIndices) {
                        if (scores[i] > maxScore) {
                            maxScore = scores[i];
                            maxIndex = i;
                        }
                    }
                    
                    if (maxIndex === -1) break;
                    
                    // Add to selected and remove from remaining
                    selectedIndices.push(maxIndex);
                    remainingIndices.splice(remainingIndices.indexOf(maxIndex), 1);
                    
                    // Re-score remaining sentences based on redundancy with the selected sentence
                    if (selectedIndices.length < summaryLength) {
                        for (let i of remainingIndices) {
                            const overlap = lcsLength(sentences[i], sentences[maxIndex]);
                            scores[i] -= overlap; // Penalize for redundancy
                        }
                    }
                }
                
                // Sort selected indices to maintain original sentence order
                selectedIndices.sort((a, b) => a - b);
                
                // Return selected sentences
                return selectedIndices.map(idx => sentences[idx]);
            };

            const handleSummarize = async () => {
                if (!inputText.trim()) return;

                setIsProcessing(true);
                setOutputSummary('');

                try {
                    // Split input text into sentences
                    const sentences = inputText.split(/[.!?]+/)
                        .map(s => s.trim())
                        .filter(s => s.length > 0);
                    
                    // Process frequency data
                    const freqData = computeWordFrequency(inputText);
                    setFrequencyData(freqData);
                    
                    // Create a word importance map from frequency data
                    const wordImportance = {};
                    freqData.forEach(item => {
                        wordImportance[item.word] = item.count;
                    });
                    
                    // Compute frequency scores for each sentence
                    const frequencyScores = sentences.map(sentence => {
                        const words = sentence.toLowerCase().match(/\b\w+\b/g) || [];
                        return words.reduce((score, word) => score + (wordImportance[word] || 0), 0) / (words.length || 1);
                    });
                    
                    // Compute LCS scores if needed
                    const lcsScores = useLCS ? computeLcsScore(sentences) : Array(sentences.length).fill(0);
                    
                    // Combine scores based on selected algorithms
                    let finalScores = Array(sentences.length).fill(0);
                    
                    if (useFrequencyAnalysis) {
                        // Normalize frequency scores
                        const maxFreq = Math.max(...frequencyScores, 1);
                        const normFreq = frequencyScores.map(score => score / maxFreq);
                        finalScores = finalScores.map((score, i) => score + normFreq[i]);
                    }
                    
                    if (useLCS) {
                        // Normalize LCS scores
                        const maxLcs = Math.max(...lcsScores, 1);
                        const normLcs = lcsScores.map(score => score / maxLcs);
                        finalScores = finalScores.map((score, i) => score + normLcs[i]);
                    }
                    
                    // Apply greedy selection if enabled, otherwise just take top scoring sentences
                    let selectedSentences;
                    if (useGreedySelection) {
                        selectedSentences = greedySummarize(sentences, finalScores, summaryLength);
                    } else {
                        // Sort indices by score and take top summaryLength
                        const indices = Array.from(Array(sentences.length).keys())
                            .sort((a, b) => finalScores[b] - finalScores[a])
                            .slice(0, summaryLength);
                        
                        // Sort back to original order
                        indices.sort((a, b) => a - b);
                        selectedSentences = indices.map(i => sentences[i]);
                    }
                    
                    // Join sentences into summary
                    const summary = selectedSentences.join('. ') + '.';
                    
                    setTimeout(() => {
                        setOutputSummary(summary);
                        
                        // Process Huffman encoding
                        const huffmanData = huffmanEncode(inputText);
                        setHuffmanMapping(huffmanData.mapping);
                        setHuffmanBitLength(huffmanData.bitLength);
                        setHuffmanRatio(huffmanData.ratio);
                        
                        // Add the new summary to history
                        addToHistory(summary);
                        
                        setIsProcessing(false);
                    }, 1500);
                    
                } catch (error) {
                    // ... existing error handling ...
                    setIsProcessing(false);
                }
            };
            
            // Copy summary to clipboard
            const copyToClipboard = () => {
                navigator.clipboard.writeText(outputSummary)
                    .then(() => alert('Summary copied to clipboard!'))
                    .catch(err => console.error('Failed to copy: ', err));
            };
            
            // Download summary as text file
            const downloadSummary = () => {
                const blob = new Blob([outputSummary], { type: 'text/plain;charset=utf-8' });
                saveAs(blob, 'summary.txt');
            };

            return (
                <div className={`min-h-screen transition-colors duration-300 ${darkMode ? 'dark:bg-gray-900 dark:text-gray-100' : 'bg-gray-50 text-gray-900'}`}>
                    <header className="bg-gradient-to-r from-blue-600 to-purple-600 text-white p-4 shadow-md">
                        <div className="container mx-auto flex justify-between items-center">
                            <h1 className="text-2xl font-bold">Smart Text Summarizer</h1>
                            <button 
                                onClick={() => setDarkMode(!darkMode)}
                                className="flex items-center space-x-1"
                            >
                                <i className={`fas ${darkMode ? 'fa-sun' : 'fa-moon'}`}></i>
                                <span>{darkMode ? 'Light Mode' : 'Dark Mode'}</span>
                            </button>
                        </div>
                    </header>

                    <main className="container mx-auto p-4 md:p-6 max-w-4xl">
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div className="space-y-6">
                                <div className={`card rounded-lg shadow-lg p-6 ${darkMode ? 'bg-gray-800' : 'bg-white'}`}>
                                    <h2 className="text-xl font-bold mb-4">Input Text</h2>
                                    <textarea
                                        value={inputText}
                                        onChange={(e) => setInputText(e.target.value)}
                                        placeholder="Paste your text here..."
                                        className={`w-full h-40 p-3 rounded-lg border focus:ring-2 focus:outline-none transition-all ${
                                            darkMode 
                                                ? 'bg-gray-700 border-gray-600 text-white focus:ring-blue-500' 
                                                : 'bg-white border-gray-300 text-gray-900 focus:ring-blue-500'
                                        }`}
                                    ></textarea>
                                    
                                    <div className="mt-4 space-y-3">
                                        <h3 className="font-medium">Algorithm Selection</h3>
                                        <div className="flex flex-wrap gap-4">
                                            <label className="flex items-center">
                                                <input 
                                                    type="checkbox" 
                                                    checked={useFrequencyAnalysis} 
                                                    onChange={() => setUseFrequencyAnalysis(!useFrequencyAnalysis)}
                                                    className="mr-2"
                                                />
                                                Frequency Analysis
                                            </label>
                                            <label className="flex items-center">
                                                <input 
                                                    type="checkbox" 
                                                    checked={useLCS} 
                                                    onChange={() => setUseLCS(!useLCS)}
                                                    className="mr-2"
                                                />
                                                LCS
                                            </label>
                                            <label className="flex items-center">
                                                <input 
                                                    type="checkbox" 
                                                    checked={useGreedySelection} 
                                                    onChange={() => setUseGreedySelection(!useGreedySelection)}
                                                    className="mr-2"
                                                />
                                                Greedy Sentence Selection
                                            </label>
                                        </div>
                                        
                                        <div>
                                            <label className="block mb-2">
                                                Summary Length (sentences)
                                                <input 
                                                    type="number" 
                                                    min="1" 
                                                    max="10" 
                                                    value={summaryLength} 
                                                    onChange={(e) => setSummaryLength(parseInt(e.target.value))}
                                                    className={`ml-3 w-16 p-1 rounded border ${
                                                        darkMode ? 'bg-gray-700 border-gray-600' : 'bg-white border-gray-300'
                                                    }`}
                                                />
                                            </label>
                                        </div>
                                    </div>
                                </div>

                                <div className={`card rounded-lg shadow-lg p-6 ${darkMode ? 'bg-gray-800' : 'bg-white'}`}>
                                    <h2 className="text-xl font-bold mb-4">Summary History</h2>
                                    <div className="space-y-4">
                                        {summaryHistory.length > 0 ? (
                                            summaryHistory.map((item, index) => (
                                                <div key={index} className={`p-3 rounded-md ${darkMode ? 'bg-gray-700 hover:bg-gray-600' : 'bg-gray-100 hover:bg-gray-200'} transition-all`}>
                                                    <div className="flex justify-between items-start mb-2">
                                                        <p className="text-sm font-medium">{new Date(item.timestamp).toLocaleString()}</p>
                                                    </div>
                                                    <p className="text-sm mb-2">{item.summary.substring(0, 100)}...</p>
                                                    <div className="flex space-x-2">
                                                        <button 
                                                            onClick={() => viewHistorySummary(item.summary)} 
                                                            className={`text-xs px-2 py-1 rounded ${darkMode ? 'gradient-btn-dark' : 'gradient-btn-light'}`}
                                                        >
                                                            View
                                                        </button>
                                                        <button 
                                                            onClick={() => removeFromHistory(index)} 
                                                            className="text-xs px-2 py-1 rounded bg-red-500 text-white hover:bg-red-600"
                                                        >
                                                            Delete
                                                        </button>
                                                    </div>
                                                </div>
                                            ))
                                        ) : (
                                            <p className={`text-center py-4 ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>
                                                No summary history yet
                                            </p>
                                        )}
                                    </div>
                                </div>
                            </div>

                            <div className="space-y-6">
                                <div className={`card rounded-lg shadow-lg p-6 ${darkMode ? 'bg-gray-800' : 'bg-white'}`}>
                                    <h2 className="text-xl font-bold mb-4">Summary Output</h2>
                                    <div className={`p-4 rounded-lg border ${darkMode ? 'bg-gray-700 border-gray-600' : 'bg-gray-100 border-gray-300'}`}>
                                        {isProcessing ? (
                                            <div className="flex flex-col items-center justify-center py-8">
                                                <div className="spinner"></div>
                                                <p className="mt-2">Processing your text...</p>
                                            </div>
                                        ) : (
                                            <p className="whitespace-pre-wrap">{outputSummary || 'No summary yet.'}</p>
                                        )}
                                    </div>
                                    
                                    {/* Add copy and download buttons */}
                                    {outputSummary && (
                                        <div className="mt-4 flex gap-3">
                                            <button 
                                                onClick={copyToClipboard}
                                                className={`px-3 py-1.5 rounded-md flex items-center ${
                                                    darkMode ? 'bg-blue-600 hover:bg-blue-700' : 'bg-blue-500 hover:bg-blue-600'
                                                } text-white`}
                                            >
                                                <i className="fas fa-copy mr-2"></i> Copy Summary
                                            </button>
                                            <button 
                                                onClick={downloadSummary}
                                                className={`px-3 py-1.5 rounded-md flex items-center ${
                                                    darkMode ? 'bg-green-600 hover:bg-green-700' : 'bg-green-500 hover:bg-green-600'
                                                } text-white`}
                                            >
                                                <i className="fas fa-download mr-2"></i> Download as .txt
                                            </button>
                                        </div>
                                    )}
                                </div>

                                <div className={`card rounded-lg shadow-lg p-6 ${darkMode ? 'bg-gray-800' : 'bg-white'}`}>
                                    <h2 className="text-xl font-bold mb-4">Summarize</h2>
                                    <button
                                        onClick={handleSummarize}
                                        disabled={isProcessing || !inputText.trim()}
                                        className={`w-full py-3 px-4 rounded-lg font-medium transition-all ${
                                            isProcessing || !inputText.trim()
                                                ? 'bg-gray-400 cursor-not-allowed'
                                                : darkMode
                                                    ? 'gradient-btn-dark hover:shadow-lg'
                                                    : 'gradient-btn-light hover:shadow-lg'
                                        }`}
                                    >
                                        {isProcessing ? 'Processing...' : 'Summarize Text'}
                                    </button>
                                </div>
                                
                                {/* Word Frequency & Keywords Card */}
                                {frequencyData.length > 0 && (
                                    <div className={`card rounded-lg shadow-lg p-6 fade-in ${darkMode ? 'bg-gray-800' : 'bg-white'}`}>
                                        <h2 className="text-xl font-bold mb-4">Word Frequency & Keywords</h2>
                                        
                                        <div className={`rounded-lg overflow-hidden border ${darkMode ? 'border-gray-600' : 'border-gray-300'}`}>
                                            <table className="min-w-full">
                                                <thead className={`${darkMode ? 'bg-gray-700' : 'bg-gray-100'}`}>
                                                    <tr>
                                                        <th className="px-4 py-2 text-left">Word</th>
                                                        <th className="px-4 py-2 text-right">Frequency</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    {frequencyData.slice(0, 15).map((item, index) => (
                                                        <tr key={index} className={`${
                                                            darkMode 
                                                                ? index % 2 === 0 ? 'bg-gray-800' : 'bg-gray-750' 
                                                                : index % 2 === 0 ? 'bg-white' : 'bg-gray-50'
                                                        } hover:bg-opacity-80`}>
                                                            <td className="px-4 py-2 border-t border-opacity-20">{item.word}</td>
                                                            <td className="px-4 py-2 text-right border-t border-opacity-20">{item.count}</td>
                                                        </tr>
                                                    ))}
                                                </tbody>
                                            </table>
                                        </div>
                                        
                                        <div className="mt-4">
                                            <h3 className="font-medium mb-2">Top Keywords</h3>
                                            <div className="flex flex-wrap gap-2">
                                                {topKeywords.map((item, index) => (
                                                    <span 
                                                        key={index}
                                                        className={`keyword-pill px-3 py-1 text-sm rounded-full ${
                                                            darkMode 
                                                                ? 'bg-blue-600 text-white hover:bg-blue-500' 
                                                                : 'bg-blue-100 text-blue-800 hover:bg-blue-200'
                                                        }`}
                                                    >
                                                        {item.word} ({item.count})
                                                    </span>
                                                ))}
                                            </div>
                                        </div>
                                    </div>
                                )}
                                
                                {/* Huffman Compression Info Card */}
                                {Object.keys(huffmanMapping).length > 0 && (
                                    <div className={`card rounded-lg shadow-lg p-6 fade-in ${darkMode ? 'bg-gray-800' : 'bg-white'}`}>
                                        <button 
                                            onClick={() => setShowHuffmanDetails(!showHuffmanDetails)}
                                            className="w-full flex justify-between items-center text-xl font-bold"
                                        >
                                            <span>Huffman Compression Details</span>
                                            <i className={`fas fa-chevron-${showHuffmanDetails ? 'up' : 'down'}`}></i>
                                        </button>
                                        
                                        {showHuffmanDetails && (
                                            <div className="mt-4 fade-in">
                                                <div className="flex flex-wrap justify-between mb-4 p-3 rounded-lg bg-opacity-20 
                                                                border border-opacity-20 text-sm
                                                                ${darkMode ? 'bg-blue-900 border-blue-700' : 'bg-blue-50 border-blue-200'}">
                                                    <div>
                                                        <span className="font-medium">Compressed Bit Length:</span>
                                                        <span className="ml-2">{huffmanBitLength.toLocaleString()} bits</span>
                                                    </div>
                                                    <div>
                                                        <span className="font-medium">Compression Ratio:</span>
                                                        <span className="ml-2">{huffmanRatio}%</span>
                                                    </div>
                                                </div>
                                                
                                                <div className={`rounded-lg overflow-hidden border ${darkMode ? 'border-gray-600' : 'border-gray-300'}`}>
                                                    <div className="max-h-64 overflow-y-auto">
                                                        <table className="min-w-full">
                                                            <thead className={`sticky top-0 ${darkMode ? 'bg-gray-700' : 'bg-gray-100'}`}>
                                                                <tr>
                                                                    <th className="px-4 py-2 text-left">Character</th>
                                                                    <th className="px-4 py-2 text-left">Huffman Code</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                {Object.entries(huffmanMapping).map(([char, code], index) => (
                                                                    <tr key={index} className={`${
                                                                        darkMode 
                                                                            ? index % 2 === 0 ? 'bg-gray-800' : 'bg-gray-750' 
                                                                            : index % 2 === 0 ? 'bg-white' : 'bg-gray-50'
                                                                    } hover:bg-opacity-80`}>
                                                                        <td className="px-4 py-1.5 border-t border-opacity-20">
                                                                            {char === ' ' ? '(space)' : char === '\n' ? '(newline)' : char}
                                                                        </td>
                                                                        <td className="px-4 py-1.5 border-t border-opacity-20 font-mono">
                                                                            {code}
                                                                        </td>
                                                                    </tr>
                                                                ))}
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        )}
                                    </div>
                                )}
                            </div>
                        </div>
                    </main>

                    <footer className="bg-gray-100 dark:bg-gray-800 py-4 mt-8">
                        <div className="container mx-auto text-center text-sm">
                            <p>Â© 2024 Smart Text Summarizer. All rights reserved.</p>
                        </div>
                    </footer>
                </div>
            );
        };

        ReactDOM.render(<App />, document.getElementById('app'));
    </script>
</body>
</html>